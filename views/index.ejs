<% include ./partials/header.ejs %>
  <main class="w-[100vw]  h-[90vh] flex md:flex-row bg-pink-300 flex-col p-8">
    <!-- left section -->
    <section class="left-section h-[100%] w-1/2 p-5  ">
      <div class="left-section h-full flex flex-col gap-2 md:text-xl overflow-y-scroll">

        <a href="/" class="font-bold w-full p-5 bg-slate-100 hover:bg-pink-100 rounded-[10px]">
          All
        </a>

        <% const uniqueSubjects=new Set(); posts.forEach((post)=> {
          uniqueSubjects.add(post.subject);
          });
        %>

          <% Array.from(uniqueSubjects).forEach((subject)=> { %>
            <a href="/filter/<%= subject %>" class="font-bold w-full p-5 bg-slate-100 hover:bg-pink-100 rounded-[10px]">
              <%= subject %>
            </a>
          <% }) %>

      </div>
    </section>

    <!-- right section -->
    <section class="w-1/2 p-5">
      <div class=" bg-white h-full rounded-[10px] flex flex-wrap justify-around p-5 overflow-y-scroll">

        <!-- PDFs -->

        <% filteredPosts.forEach((post)=> { %>
          <div class="flex flex-col h-[200px] w-[250px] bg-slate-800 mt-5 rounded-[10px]">
            <!-- pdf thumbnail -->
            <div class="w-full relative h-[60%] overflow-hidden bg-black rounded-[10px]">
              <img class="rounded-[10px] object-fill " src="/uploads/defaultImg.jpg" alt="">
              <!-- download pdf -->
              <a href="/download/<%= post._id %>" class="absolute right-[10px] bottom-[10px] w-[30px] h-[30px] rounded-full">
                <svg class="hover:bg-black w-[30px] h-[30px] rounded-full" xmlns="http://www.w3.org/2000/svg"
                  height="32" width="32" viewBox="0 0 512 512">
                  <path fill="#e228a7"
                    d="M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM376.9 294.6L269.8 394.5c-3.8 3.5-8.7 5.5-13.8 5.5s-10.1-2-13.8-5.5L135.1 294.6c-4.5-4.2-7.1-10.1-7.1-16.3c0-12.3 10-22.3 22.3-22.3l57.7 0 0-96c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32l0 96 57.7 0c12.3 0 22.3 10 22.3 22.3c0 6.2-2.6 12.1-7.1 16.3z" />
                </svg>
              </a>
            </div>

            <!-- pdf info -->
            <div class="pdf-info h-[40%] w-full text-white p-2">
              <%= post.unitname %>
            </div>
          </div>
          <% }) %>

      </div>
    </section>
  </main>
  <% include ./partials/footer.ejs %>